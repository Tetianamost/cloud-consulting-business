version: 1.0
runtime: docker
build:
  commands:
    build:
      - echo "Building with Docker..."
run:
  command: /usr/bin/supervisord -c /etc/supervisor/conf.d/supervisord.conf
  network:
    port: 80
    env: PORT
  env:
    - name: PORT
      value: "80"
    - name: DATABASE_URL
      value: "postgresql://postgres:CloudConsulting2024!@consulting-prod.c2v4ggsygj4q.us-east-1.rds.amazonaws.com:5432/postgres"
    - name: GIN_MODE
      value: "release"
    - name: LOG_LEVEL
      value: "2"
    - name: AWS_REGION
      value: "us-east-1"
    - name: BEDROCK_REGION
      value: "us-east-1"
    - name: BEDROCK_MODEL_ID
      value: "amazon.nova-lite-v1:0"
    - name: BEDROCK_BASE_URL
      value: "https://bedrock-runtime.us-east-1.amazonaws.com"
    - name: BEDROCK_TIMEOUT_SECONDS
      value: "30"
    - name: AWS_SES_REGION
      value: "us-east-1"
    - name: SES_SENDER_EMAIL
      value: "info@cloudpartner.pro"
    - name: SES_REPLY_TO_EMAIL
      value: "info@cloudpartner.pro"
    - name: SES_TIMEOUT_SECONDS
      value: "30"
    - name: CORS_ALLOWED_ORIGINS
      value: "https://cloudpartner.pro,https://www.cloudpartner.pro"
    - name: CHAT_MODE
      value: "polling"
    - name: ENABLE_EMAIL_EVENTS
      value: "true"
    - name: ENABLE_CHAT_METRICS
      value: "true"
    - name: ENABLE_PERFORMANCE_MONITORING
      value: "true"
    - name: JWT_SECRET
      value: "your-secure-jwt-secret-change-this-in-production"
    - name: REDIS_URL
      value: ""
    - name: CACHE_TTL_SECONDS
      value: "300"
